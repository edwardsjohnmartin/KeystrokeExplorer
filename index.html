<!DOCTYPE html>
<html>
  <head>
    <title>Keystroke Explorer</title>
    <link rel="icon" href="./favicon.ico?v=3" />
    <meta name = "description" content = "EdwardsLab" />
    <meta name = "Keywords" content = "Computer, Science, John, Edwards" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="../assets/favicon.ico"/>

    <script src="lib/jquery-3.6.0.min.js"></script>
    <script src="lib/jquery.csv.js"></script>
    
    <script src="lib/papaparse.min.js"></script>
    <script src="lib/d3.js"></script>
    <script src="lib/codemirror.js"></script>

    <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
    <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
    <!--script src="lib/filbert.js"></script-->

    <link rel="stylesheet" href="lib/codemirror.css">
    <script src="lib/codemirror/addon/selection/mark-selection.js"></script>
    <script src="lib/codemirror/mode/python/python.js"></script>

    <!--link rel="stylesheet" href="lib/frappe-datatable.css">
    <script src="lib/sortable.js"></script>
    <script src="lib/frappe-datatable.js"></script-->

    <script src="lib/skulpt.min.js" type="text/javascript"></script>
    <script src="lib/skulpt-stdlib.js" type="text/javascript"></script>

    <script src="lib/saveSvgAsPng.js" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css">
  </head>

  <!-----------------------------------------------------------------------
  <!-- Body --
  <!----------------------------------------------------------------------->
  <body onload="onload()">
    <main>
      <!-------------- Header -------------->
      <headerleft>
        <div>
          <br>
          ProgSnap2: <input id="ps2-selector" type="file" accept=".csv, .ps2, .log" change="ps2Changed()"></input>
          <br>
          <label for="subjects">SubjectID:</label>
          <select name="subjects" id="subjects" onchange="subjectChanged()"></select>

          <label for="assignments">AssignmentID:</label>
          <select name="assignments" id="assignments" onchange="assignmentChanged()"></select>

          <label for="files">File:</label>
          <select name="files" id="files" onchange="fileChanged()"></select>

          <label for="fileGroup">File Group: </label>
          <text name="fileGroup" id="fileGroup">N/A</text>

          <label for="findString">Search string (use arrows):</label>
          <input name="findString" id="findString" type="text"></input>

          <text id="compileError">Error compiling</text>

          <text id="loading">Loading...</text>

          <br>
          <label for="slider">Playback:</label>
          <input type="range" id="slider" name="slider" min="0" max="10">

          <text id="edit-num"></text>
          <br>
        </div>
      </headerleft>

      <!-------------- Code -------------->
      <code>
        <textarea id="textarea" name="textarea">File text</textarea>
      </code>

      <!-------------- Scatter Dropdown Menu -------------->
      <headerright>
        <label for="viztype">Visualization:</label>
          <select name="viztype" id="viztype" onchange="updateGraphs()">
            <option value="CPC">CPC</option>
            <option value="Scatter">Scatter</option>
            <option value="Depth">Depth</option>
            <option value="Height">Height</option>
          </select>
        <button name="visual" id="visual" onclick="visualizationChanged()">Switch Visualization</button>
        <div id="scatterWidgets">
          <label for="x-axis">X Axis</label>
          <select name="x axis" id="x-axis" onchange="updateGraphs()">
            <!-- <option value="deleted nodes">deleted nodes</option> -->
            <option value="Attentiveness">Attentiveness</option>
            <option value="Depth Skew">Depth Skew</option>
            <option value="Foresight">Foresight</option>
            <option value="Grades">Grades</option>
            <option value="Height">Height</option>
            <option value="Height ATM">Height ATM</option>
            <option value="Height Skew">Height Skew</option>
            <option value="Monotonicity of Compilable States">Monotonicity of Compilable States</option>
            <option value="Number of Comments">Number of Comments</option>
            <option value="Number of Keystrokes">Number of Keystrokes</option>
            <option value="Number of Nodes">Number of Nodes</option>
            <option value="Percent of Compilable States">Percent of Compilable States</option>
            <!--<option value="tree width">tree width</option> -->
            <!-- <option value="tree height">tree height</option> -->
          </select>

          <label for="y-axis">Y Axis</label>
          <select name="y axis" id="y-axis" onchange="updateGraphs()">
            <!-- <option value="deleted nodes">deleted nodes</option> -->
            <option value="Attentiveness">Attentiveness</option>
            <option value="Depth Skew">Depth Skew</option>
            <option value="Foresight">Foresight</option>
            <option value="Grades">Grades</option>
            <option value="Height">Height</option>
            <option value="Height ATM">Height ATM</option>
            <option value="Height Skew">Height Skew</option>
            <option value="Monotonicity of Compilable States">Monotonicity of Compilable States</option>
            <option value="Number of Comments">Number of Comments</option>
            <option value="Number of Keystrokes">Number of Keystrokes</option>
            <option value="Number of Nodes">Number of Nodes</option>
            <option value="Percent of Compilable States">Percent of Compilable States</option>
            <!--<option value="tree width">tree width</option> -->
            <!-- <option value="tree height">tree height</option> -->
          </select>

          <label for="color-scale">Color Scale</label>
          <select name="color-scale" id="color-scale" onchange="updateGraphs()">
            <!-- <option value="deleted nodes">deleted nodes</option> -->
            <option value="Attentiveness">Attentiveness</option>
            <option value="Depth Skew">Depth Skew</option>
            <option value="Foresight">Foresight</option>
            <option value="Grades">Grades</option>
            <option value="Height">Height</option>
            <option value="Height ATM">Height ATM</option>
            <option value="Height Skew">Height Skew</option>
            <option value="Monotonicity of Compilable States">Monotonicity of Compilable States</option>
            <option value="Number of Comments">Number of Comments</option>
            <option value="Number of Keystrokes">Number of Keystrokes</option>
            <option value="Number of Nodes">Number of Nodes</option>
            <option value="Percent of Compilable States">Percent of Compilable States</option>
            <!--<option value="tree width">tree width</option> -->
            <!-- <option value="tree height">tree height</option> -->
          </select>

          <button name="updatescatter" id="updatescatter" onclick="updateScatter()">Update Scatter</button>
          <p id="testcomm"></p>
          <label for="correlation coefficient">Correlation Coefficient: </label>
          <p id="correlation coefficient">n/a</p>
        </div>
        <div id="depthWidgets">
          <!--<button name="updatedepth" id="updatedepth" onclick="updateDepth()">Update Depth</button>
          <select name="student select" id="depth student select" onchange="updateDepth()">
            <option value="Student1">Student1</option>
            <option value="Student2">Student2</option>
            <option value="Student3">Student3</option>
            <option value="Student4">Student4</option>
            <option value="Student5">Student5</option>
            <option value="Student6">Student6</option>
            <option value="Student7">Student7</option>
            <option value="Student8">Student8</option>
            <option value="Student9">Student9</option>
            <option value="Student10">Student10</option>
            <option value="Student11">Student11</option>
            <option value="Student12">Student12</option>
            <option value="Student13">Student13</option>
            <option value="Student14">Student14</option>
            <option value="Student15">Student15</option>
            <option value="Student16">Student16</option>
            <option value="Student17">Student17</option>
            <option value="Student18">Student18</option>
            <option value="Student19">Student19</option>
            <option value="Student20">Student20</option>
          </select>
          <select name="assign select" id="depth assign select" onchange="updateDepth()">
            <option value="Assign6">Assign6</option>
            <option value="Assign7">Assign7</option>
            <option value="Assign8">Assign8</option>
            <option value="Assign9">Assign9</option>
            <option value="Assign11">Assign11</option>
            <option value="Assign12">Assign12</option>
            <option value="Assign13">Assign13</option>
          </select>-->
        </div>
        <div id="tastWidgets">
          <button name="updatetast" id="updatetast" onclick="updateTAST()">Update TAST</button>
        </div>
      </headerright>


      <!-------------- Chart -------------->
      <cpchart style="z-index: 9999">
        <div id="Charts" class="tabcontent_">
          <svg class="chart" id="chart">
            <g id="cpchartgroup">
              <g id="bars"></g>
              <g id="barsstart"></g>
              <g id="barsend"></g>
              <g id="compilable"></g>
              <g id="cpimage"></g>
              <g id="playbarg"></g>
            </g>
          </svg>
        </div>
        <div id="Scatters">
          <svg id="scattersvg" width="700" height="425"></svg>
        </div>
      </cpchart>
      <depths>
        <div id="Depths">
          <svg id="depthsvg" width="700" height="350"></svg>
        </div>
      </depths>
      <tast>
        <div id="TAST">
          <svg id="tastsvg" width="700" height="350"></svg>
        </div>
      </tast>
      <tchart>
        <div>
          <br>
          <svg class="chart" id="timelinesvg">
            <g id="timelinechartgroup">
              <g id="timeline"></g>
              <g id="timelineimage"></g>
              <g id="timelineplaybarg"></g>
            </g>
          </svg>
        </div>
      </tchart>

      <!-------------- CSV -------------->
      <csv>
        <div id="grid" class="tabcontent_"></div>


        <div id="Help" class="tabcontent">
          <br>
          Helpful keystrokes:
          <br>f - move forward one event
          <br>d - move backward one event
          <br>F - more forward 10 events
          <br>D - move backward 10 events
          <br>g - move forward to next checkpoint event
          <br>s - move backward to next checkpoint event
          <br>S - move forward to first snapshot containing the search string
          <br>spacebar - replay
          <br>right arrow - next file
          <br>left arrow - previous file
        </div>
      </csv>
    </main>


    <script>
      /*
    <table class="page">
      <tr class="page">
        <td class="page" id="tdcode">
    <!-----------------------------------------------------------------------
    <!-- Code window --
    <!----------------------------------------------------------------------->
    <!--textarea id="textarea" name="textarea">File text</textarea-->
        </td>
        <td class="page" id="tdtabs">
    <!-----------------------------------------------------------------------
    <!-- Tabs --
    <!----------------------------------------------------------------------->
    <!--div class="tab">
      <button class="tablinks" onclick="changeTabs(event, 'Charts')" id="defaultOpen">Charts</button>
      <button class="tablinks" onclick="changeTabs(event, 'grid')">CSV</button>
      <button class="tablinks" onclick="changeTabs(event, 'Help')">Help</button>
    </div-->

    <!-- Tab content -->
    <div id="Charts" class="tabcontent">
      <svg class="chart" id="chart">
        <g id="cpchartgroup">
          <g id="bars"></g>
          <g id="barsstart"></g>
          <g id="barsend"></g>
          <g id="compilable"></g>
          <g id="playbarg"></g>
        </g>
      </svg>
      <br>
      <!--svg class="chart" id="timelinesvg">
        <g id="timelinechartgroup">
          <g id="timeline"></g>
          <g id="timelineplaybarg"></g>
        </g>
      </svg-->
    </div>

    <!--div id="grid" class="tabcontent"></div-->

    <div id="Help" class="tabcontent">
      <br>
      Helpful keystrokes:
      <br>f - move forward one event
      <br>d - move backward one event
      <br>F - more forward 10 events
      <br>D - move backward 10 events
      <br>g - move forward to next checkpoint event
      <br>s - move backward to next checkpoint event
      <br>right arrow - move forward to first snapshot containing the search string
    </div>
    </td>
*/
    </script>
    
    <script src="main.js?5"></script>
    <script src="chart.js?2"></script>
    <script src="scatter.js?3"></script>
    <script src="depthgraph.js?3"></script>
    <script src="TAST.js?3"></script>
    <script src="timeline.js?2"></script>
    <script src="spreadsheet.js?3"></script>
    <script src="compile.js?3"></script>

    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>


</body>
</html>
